# ============================================
# MSF AI Assistant - Environment Configuration
# ============================================
# For local development, copy this file to .env.local and fill in your values.
# In production, these are provided by Terraform/Azure Container Apps.

# --------------------------------------------
# NextAuth Configuration
# --------------------------------------------
AUTH_URL=http://localhost:3000
AUTH_SECRET=your-nextauth-secret-here

# --------------------------------------------
# Azure AD Authentication
# --------------------------------------------
AZURE_CLIENT_ID=your-azure-ad-client-id
AZURE_CLIENT_SECRET=your-azure-ad-client-secret
AZURE_TENANT_ID=your-azure-ad-tenant-id

# --------------------------------------------
# Azure OpenAI (for base model deployments - uses Entra ID authentication)
# --------------------------------------------
# Azure OpenAI endpoint for model deployments (gpt-4o, gpt-35-turbo, o3, etc.)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
OPENAI_API_VERSION=2025-04-01-preview

# Default model deployment name (fallback when requested model is invalid)
DEFAULT_MODEL=gpt-4o

# Note: OPENAI_API_KEY is only needed for AI Foundry OpenAI-compatible endpoint (Grok, DeepSeek)
# All other services use DefaultAzureCredential (managed identity):
# - Azure OpenAI models (GPT-4, GPT-3.5, etc.)
# - Whisper transcription
# - Azure Speech Services (TTS)
OPENAI_API_KEY=your-azure-openai-api-key

# --------------------------------------------
# Azure AI Foundry (for AI Agents & OpenAI SDK Models)
# --------------------------------------------
# Azure AI Foundry project endpoint for agents (services.ai.azure.com)
# Format: https://<foundry-resource>.services.ai.azure.com/api/projects/<project-name>
AZURE_AI_FOUNDRY_ENDPOINT=https://ts-aiassist-dev.services.ai.azure.com/api/projects/default

# Optional: OpenAI-compatible endpoint for Grok/DeepSeek models using standard OpenAI SDK
# If not set, will auto-derive from AZURE_AI_FOUNDRY_ENDPOINT
# Format: https://<foundry-resource>.services.ai.azure.com/openai/v1/
# AZURE_AI_FOUNDRY_OPENAI_ENDPOINT=https://ts-aiassist-dev.services.ai.azure.com/openai/v1/

# Note: Agent IDs are now configured per environment in types/openai.ts
# Dev uses: asst_Puf3ldskHlYHmW5z9aQy5fZL
# Prod uses: Update OpenAIModelsProd in types/openai.ts with production agent ID

# Optional: Override deployment names for third-party models
# These should match the deployment names configured in Azure AI Foundry
# DEEPSEEK_DEPLOYMENT_NAME=DeepSeek-V3
# GROK_3_DEPLOYMENT_NAME=grok-3
# GROK_4_DEPLOYMENT_NAME=grok-4-fast-reasoning

# Embeddings
OPENAI_EMBEDDING_DEPLOYMENT=text-embedding
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_EMBEDDING_VERSION=2

# --------------------------------------------
# Audio Models (use Entra ID authentication)
# --------------------------------------------
# Whisper (audio transcription via Azure OpenAI) - Uses managed identity (DefaultAzureCredential)
# Azure Speech Services (Text-to-Speech) - Uses managed identity (DefaultAzureCredential), region hardcoded as eastus2

# --------------------------------------------
# Azure Blob Storage (uses Entra ID authentication via DefaultAzureCredential)
# --------------------------------------------
# Primary storage account (US region)
AZURE_BLOB_STORAGE_NAME=your-storage-account-name
AZURE_BLOB_STORAGE_IMAGE_CONTAINER=ai-portal-images

# EU region storage (optional - for EU users based on email domain)
# Users with @amsterdam.msf.org or other EU domains will automatically use this storage account
AZURE_BLOB_STORAGE_NAME_EU=your-eu-storage-account-name

# Note: All storage uses DefaultAzureCredential (Managed Identity / Entra ID)
# No storage account keys are required or used

# --------------------------------------------
# Azure AI Search (uses Entra ID authentication)
# --------------------------------------------
SEARCH_ENDPOINT=https://your-search-service.search.windows.net/
SEARCH_INDEX=live-aiassist-index
SEARCH_DATASOURCE=ai-portal-datasources
SEARCH_INDEXER=live-aiassist-indexer
STORAGE_DATA_SOURCE_CONTAINER=ai-portal-datasources
STORAGE_RESOURCE_ID=/subscriptions/.../resourceGroups/.../providers/Microsoft.Storage/storageAccounts/...
# Note: Uses DefaultAzureCredential for authentication (no API key needed)

# --------------------------------------------
# LaunchDarkly Feature Flags
# --------------------------------------------
NEXT_PUBLIC_LAUNCHDARKLY_CLIENT_ID=your-launchdarkly-client-id
LAUNCHDARKLY_SDK_KEY=your-launchdarkly-sdk-key

# --------------------------------------------
# Application Configuration
# --------------------------------------------
NEXT_PUBLIC_BUILD=local
NEXT_PUBLIC_ENV=development
ENVIRONMENT_NAME=dev
NEXT_PUBLIC_EMAIL=ai@newyork.msf.org
NEXT_PUBLIC_FEEDBACK_EMAIL=ai.team@amsterdam.msf.org

# --------------------------------------------
# Rate Limiting
# --------------------------------------------
MAX_REQUESTS_PER_MINUTE=20
MAX_TOKENS_PER_DAY=100000
MAX_FILE_SIZE_MB=10
